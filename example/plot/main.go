package main

import (
	"gonum.org/v1/plot"
	"gonum.org/v1/plot/plotter"
	"gonum.org/v1/plot/plotutil"
	"gonum.org/v1/plot/vg"
)

var (
	tHash = plotter.XYs{
		{1000, 2.733},
		{2000, 4.685},
		{3000, 18.472},
		{4000, 12.872},
		{5000, 16.290},
		{6000, 19.605},
		{7000, 23.328},
		{8000, 28.823},
		{9000, 35.078},
		{10000, 37.636},
		{11000, 40.503},
		{12000, 49.873},
		{13000, 48.674},
		{14000, 51.472},
		{15000, 60.086},
		{16000, 59.504},
		{17000, 66.705},
		{18000, 74.540},
		{19000, 75.988},
		{20000, 80.316},
		{21000, 85.310},
		{22000, 91.449},
		{23000, 99.898},
		{24000, 99.953},
		{25000, 109.814},
		{26000, 107.188},
		{27000, 112.096},
		{28000, 119.519},
		{29000, 117.671},
		{30000, 119.599},
	}

	tSet = plotter.XYs{
		{1000, 2.589},
		{2000, 3.310},
		{3000, 6.574},
		{4000, 21.385},
		{5000, 10.193},
		{6000, 13.574},
		{7000, 14.999},
		{8000, 19.146},
		{9000, 20.408},
		{10000, 21.452},
		{11000, 22.771},
		{12000, 27.056},
		{13000, 30.503},
		{14000, 32.376},
		{15000, 35.634},
		{16000, 42.185},
		{17000, 42.765},
		{18000, 44.995},
		{19000, 47.502},
		{20000, 46.400},
		{21000, 53.112},
		{22000, 57.365},
		{23000, 58.491},
		{24000, 60.879},
		{25000, 67.146},
		{26000, 70.215},
		{27000, 70.040},
		{28000, 73.189},
		{29000, 75.773},
		{30000, 79.767},
	}

	tList = plotter.XYs{
		{1000, 1.598},
		{2000, 3.801},
		{3000, 3.183},
		{4000, 4.201},
		{5000, 9.131},
		{6000, 5.384},
		{7000, 6.444},
		{8000, 13.073},
		{9000, 14.940},
		{10000, 14.964},
		{11000, 16.472},
		{12000, 19.733},
		{13000, 20.250},
		{14000, 20.932},
		{15000, 22.380},
		{16000, 25.104},
		{17000, 27.344},
		{18000, 32.342},
		{19000, 31.014},
		{20000, 33.587},
		{21000, 36.785},
		{22000, 40.512},
		{23000, 36.541},
		{24000, 40.727},
		{25000, 43.799},
		{26000, 44.238},
		{27000, 44.318},
		{28000, 44.876},
		{29000, 51.392},
		{30000, 51.124},
	}

	tZset = plotter.XYs{
		{1000, 3.434},
		{2000, 9.168},
		{3000, 21.341},
		{4000, 16.264},
		{5000, 22.814},
		{6000, 25.773},
		{7000, 29.111},
		{8000, 33.798},
		{9000, 41.769},
		{10000, 45.457},
		{11000, 50.318},
		{12000, 55.323},
		{13000, 61.382},
		{14000, 65.724},
		{15000, 69.293},
		{16000, 73.799},
		{17000, 87.228},
		{18000, 82.847},
		{19000, 89.629},
		{20000, 100.514},
		{21000, 107.481},
		{22000, 113.658},
		{23000, 119.266},
		{24000, 123.098},
		{25000, 127.983},
		{26000, 133.822},
		{27000, 143.870},
		{28000, 139.396},
		{29000, 149.807},
		{30000, 152.606},
	}
)

func main() {
	p, _ := plot.New()

	p.Title.Text = "cache rebuild lantency(element size 32b)"
	p.X.Label.Text = "elements num"
	p.Y.Label.Text = "lantency/ms"

	p.X.Min = 0
	p.X.Max = 30000

	p.Y.Min = 0
	p.Y.Max = 160

	p.Legend.Left = true
	p.Legend.Top = true

	err := plotutil.AddLinePoints(p,
		"hash", tHash,
		"list", tList,
		"set", tSet,
		"zset", tZset)

	if err != nil {
		panic(err)
	}

	// Save the plot to a PNG file.
	if err := p.Save(12*vg.Inch, 7*vg.Inch, "rebuild_lantency.png"); err != nil {
		panic(err)
	}
}
